"""å›½é™…åŒ–æ”¯æŒ"""

TRANSLATIONS = {
    "en": {
        "window_title": "HTML â†” Markdown Pro",
        "title": "HTML â†” Markdown Pro",
        "subtitle": "BATCH HTML & MARKDOWN CONVERTER",
        "add_files": "ï¼‹ Add Files",
        "add_folder": "+ Add Folder",
        "clear": "Clear",
        "output_dir": "Output Dir",
        "default_output": "Default (same folder)",
        "auto_detect": "AUTO-DETECT MODE",
        "recent_files": "Recent Files",
        "ready": "Ready to process",
        "open_output": "Open Output",
        "start_convert": "START SMART CONVERSION",
        "processing": "SMART PROCESSING...",
        "cancel": "Cancel",
        "pause": "Pause",
        "resume": "Resume",
        "log": "Log",
        "preview_selected": "Preview Selected",
        "live_convert": "Live convert on edit",
        "preview_mode": "Preview Mode",
        "rendered": "Rendered",
        "plain": "Plain",
        "export_label": "Also export:",
        "pick_css": "PDF Style",
        "no_css": "No CSS",
        "features": "Features",
        "toggle_theme": "Toggle Theme",
        "warning": "Warning",
        "add_files_warning": "Please add files to convert.",
        "success": "Success",
        "result": "Result",
        "completed": "Completed!",
        "success_count": "Success",
        "failed_count": "Failed",
        "failures": "Failures",
        "exports": "Exports",
        "cancelled": "Cancelled.",
        "cancelling": "Cancelling...",
        "paused": "Paused",
        "select_files": "Select Files",
        "select_folder": "Select Folder",
        "select_output": "Select Output Folder",
        "select_css": "Select CSS file",
        "preview": "Preview",
        "select_preview": "Select a file to preview.",
        "preview_error": "Preview error",
        "no_output_dir": "No output directory selected.",
        "open_failed": "Open path failed",
        "optional_features": "Optional Features",
        "added_files": "Added {count} files from folder.",
        "no_files_found": "No compatible files found in folder.",
        "list_cleared": "List cleared.",
        "drag_drop": "Added {count} file(s) via drag & drop",
        "start_conversion": "Start conversion...",
        "cancel_requested": "Cancellation requested",
        "source_placeholder": "Source (auto-detect by file suffix)",
        "output_placeholder": "Preview output (plain)",
        "fetch_url": "Fetch URL",
        "url_placeholder": "Enter URL to fetch...",
        "fetching": "Fetching...",
        "fetch_success": "Fetched: {title}",
        "fetch_error": "Fetch failed: {error}",
        "extract_main": "Extract main content",
        "save_as": "Save As",
        "save_format": "Format:",
        "tip_add_files": "Add HTML/MD files for batch conversion",
        "tip_add_folder": "Add all HTML/MD files from a folder",
        "tip_clear": "Clear the file list",
        "tip_output_dir": "Set output directory (default: same as source)",
        "tip_fetch": "Fetch webpage content from URL",
        "tip_extract_main": "Extract main content only (remove nav, ads, etc.)",
        "browser_mode": "Enhanced",
        "tip_browser_mode": "Use browser to fetch (for sites that block crawlers)",
        "tip_save_fetched": "Save fetched content to file",
        "tip_convert": "HTMLâ†’MD or MDâ†’HTML (auto-detect by extension)",
        "tip_export": "Also export to PDF/DOCX during batch conversion",
        "tip_css": "Select CSS file for PDF/DOCX styling",
        "batch_convert": "Batch Convert",
        "web_crawler": "Web Crawler",
        "copyright": "Open source by Liangmu Studio",
    },
    "zh": {
        "window_title": "HTML â†” Markdown Pro",
        "title": "HTML â†” Markdown Pro",
        "subtitle": "æ‰¹é‡ HTML ä¸ Markdown è½¬æ¢å™¨",
        "add_files": "ï¼‹ æ·»åŠ æ–‡ä»¶",
        "add_folder": "ğŸ“‚ æ·»åŠ æ–‡ä»¶å¤¹",
        "clear": "æ¸…ç©º",
        "output_dir": "è¾“å‡ºç›®å½•",
        "default_output": "é»˜è®¤ï¼ˆåŒç›®å½•ï¼‰",
        "auto_detect": "è‡ªåŠ¨æ£€æµ‹æ¨¡å¼",
        "recent_files": "æœ€è¿‘æ–‡ä»¶",
        "ready": "å‡†å¤‡å°±ç»ª",
        "open_output": "æ‰“å¼€è¾“å‡º",
        "start_convert": "å¼€å§‹æ™ºèƒ½è½¬æ¢",
        "processing": "æ™ºèƒ½å¤„ç†ä¸­...",
        "cancel": "å–æ¶ˆ",
        "pause": "æš‚åœ",
        "resume": "ç»§ç»­",
        "log": "æ—¥å¿—",
        "preview_selected": "é¢„è§ˆé€‰ä¸­",
        "live_convert": "å®æ—¶è½¬æ¢",
        "preview_mode": "é¢„è§ˆæ¨¡å¼",
        "rendered": "æ¸²æŸ“",
        "plain": "çº¯æ–‡æœ¬",
        "export_label": "åŒæ—¶å¯¼å‡º:",
        "pick_css": "PDFæ ·å¼",
        "no_css": "æ— CSS",
        "features": "åŠŸèƒ½",
        "toggle_theme": "åˆ‡æ¢ä¸»é¢˜",
        "warning": "è­¦å‘Š",
        "add_files_warning": "è¯·æ·»åŠ è¦è½¬æ¢çš„æ–‡ä»¶ã€‚",
        "success": "æˆåŠŸ",
        "result": "ç»“æœ",
        "completed": "å®Œæˆï¼",
        "success_count": "æˆåŠŸ",
        "failed_count": "å¤±è´¥",
        "failures": "å¤±è´¥é¡¹",
        "exports": "å¯¼å‡º",
        "cancelled": "å·²å–æ¶ˆã€‚",
        "cancelling": "å–æ¶ˆä¸­...",
        "paused": "å·²æš‚åœ",
        "select_files": "é€‰æ‹©æ–‡ä»¶",
        "select_folder": "é€‰æ‹©æ–‡ä»¶å¤¹",
        "select_output": "é€‰æ‹©è¾“å‡ºæ–‡ä»¶å¤¹",
        "select_css": "é€‰æ‹©CSSæ–‡ä»¶",
        "preview": "é¢„è§ˆ",
        "select_preview": "è¯·é€‰æ‹©è¦é¢„è§ˆçš„æ–‡ä»¶ã€‚",
        "preview_error": "é¢„è§ˆé”™è¯¯",
        "no_output_dir": "æœªé€‰æ‹©è¾“å‡ºç›®å½•ã€‚",
        "open_failed": "æ‰“å¼€è·¯å¾„å¤±è´¥",
        "optional_features": "å¯é€‰åŠŸèƒ½",
        "added_files": "ä»æ–‡ä»¶å¤¹æ·»åŠ äº† {count} ä¸ªæ–‡ä»¶ã€‚",
        "no_files_found": "æ–‡ä»¶å¤¹ä¸­æœªæ‰¾åˆ°å…¼å®¹æ–‡ä»¶ã€‚",
        "list_cleared": "åˆ—è¡¨å·²æ¸…ç©ºã€‚",
        "drag_drop": "é€šè¿‡æ‹–æ”¾æ·»åŠ äº† {count} ä¸ªæ–‡ä»¶",
        "start_conversion": "å¼€å§‹è½¬æ¢...",
        "cancel_requested": "å·²è¯·æ±‚å–æ¶ˆ",
        "source_placeholder": "æºæ–‡ä»¶ï¼ˆæ ¹æ®åç¼€è‡ªåŠ¨æ£€æµ‹ï¼‰",
        "output_placeholder": "é¢„è§ˆè¾“å‡ºï¼ˆçº¯æ–‡æœ¬ï¼‰",
        "fetch_url": "æŠ“å–ç½‘é¡µ",
        "url_placeholder": "è¾“å…¥è¦æŠ“å–çš„URL...",
        "fetching": "æŠ“å–ä¸­...",
        "fetch_success": "å·²æŠ“å–: {title}",
        "fetch_error": "æŠ“å–å¤±è´¥: {error}",
        "extract_main": "æå–æ­£æ–‡",
        "save_as": "å¦å­˜ä¸º",
        "save_format": "æ ¼å¼ï¼š",
        "tip_add_files": "æ·»åŠ HTML/MDæ–‡ä»¶è¿›è¡Œæ‰¹é‡è½¬æ¢",
        "tip_add_folder": "ä»æ–‡ä»¶å¤¹æ·»åŠ æ‰€æœ‰HTML/MDæ–‡ä»¶",
        "tip_clear": "æ¸…ç©ºæ–‡ä»¶åˆ—è¡¨",
        "tip_output_dir": "è®¾ç½®è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼šä¸æºæ–‡ä»¶åŒç›®å½•ï¼‰",
        "tip_fetch": "ä»URLæŠ“å–ç½‘é¡µå†…å®¹",
        "tip_extract_main": "ä»…æå–æ­£æ–‡ï¼ˆå»é™¤å¯¼èˆªã€å¹¿å‘Šç­‰ï¼‰",
        "browser_mode": "å¢å¼ºæ¨¡å¼",
        "tip_browser_mode": "ä½¿ç”¨æµè§ˆå™¨æŠ“å–ï¼ˆç”¨äºåçˆ¬è™«ç½‘ç«™ï¼‰",
        "tip_save_fetched": "å°†æŠ“å–çš„å†…å®¹ä¿å­˜åˆ°æ–‡ä»¶",
        "tip_convert": "HTMLâ†’MD æˆ– MDâ†’HTMLï¼ˆæ ¹æ®æ‰©å±•åè‡ªåŠ¨æ£€æµ‹ï¼‰",
        "tip_export": "æ‰¹é‡è½¬æ¢æ—¶åŒæ—¶å¯¼å‡ºPDF/DOCX",
        "tip_css": "é€‰æ‹©CSSæ–‡ä»¶ç”¨äºPDF/DOCXæ ·å¼",
        "batch_convert": "æ‰¹é‡è½¬æ¢",
        "web_crawler": "ç½‘é¡µæŠ“å–",
        "copyright": "Liangmu Studio å¼€æºå‡ºå“",
    }
}

_current_lang = "en"

def set_language(lang: str):
    global _current_lang
    _current_lang = lang if lang in TRANSLATIONS else "en"

def get_language() -> str:
    return _current_lang

def t(key: str, **kwargs) -> str:
    """è·å–ç¿»è¯‘æ–‡æœ¬"""
    text = TRANSLATIONS.get(_current_lang, {}).get(key, key)
    if kwargs:
        text = text.format(**kwargs)
    return text
